# ORマッパーとイチャついてないでSQLやれよ磯野
- Rails開発でmigrationとかバッチ処理するときにSQL力が必要なので、まずは基礎を固めることを目的としたリポジトリ。
  - `ORマッパーは大変いいものだ。だがSQLが不要になったわけではない。`
- 上記データメンテ的な作業の時に使うであろうSQLを中心に書いていきます。(ALTERとかINSERTとかは多分書かない。DSL使うと思うので。)
- 一文が長くなった時にどこで区切るのかは難しいところ。どなたかいい方針あれば教えてくださいmm

## いろいろ注意点
- SQLは方言があるので、MySQLじゃ動かないとか、Postgresqlじゃ動かないとかあります。
  - この学習メモはPostgresql対象ですmm
- DBの操作では必ず行単位でデータを読み書きする。(返り値は行と列からなるテーブルの形ということ)
- セミコロンも大切な構成員なので忘れない、ハブらない。 LINEグループにもちゃんと呼ぶ。
- キーワードは大文字/小文字が区別されないけど、チーム内でどちらかで統一しておいた方がいい。
- 文字列や日付の定数はシングルクオーテーションで囲む。ダブルではない。
- DBやテーブル名の最初の文字は半角のアルファベットにする。

# 型とか制約とかについて
## 型
- やっぱり公式ドキュメントが一番！
- https://www.postgresql.jp/document/9.6/html/datatype.html
- 量がめちゃ多いので、代表的な(と勝手に思う)ものを以下に列挙
  - 数値
    - `integer`
      - `-2147483648〜+2147483647` の範囲の整数を格納することができる。
      - 小数は入れられない。
    - `bigint`
      - `-9223372036854775808〜+9223372036854775807` の範囲の整数を格納することができる。
      - 小数は(ry
    - `decimal`
      - `小数点前までは131072桁、小数点以降は16383桁` の範囲の小数を扱うことができる。
      - `numeric` はこいつと同じ。
    - `real`
      - 6桁精度
    - `double precision`
      - 15桁精度
  - 文字列
    - `varchar`
      - 上限付き可変長
    - `text`
      - 制限なし可変長
  - 残りはそのうち追加する（多い...）

## 制約
- これも後ほど

# 本編
## データの検索
- `SELECT` 文
  - WIP

# その他
## DBを作成する
- 構文

```sql
CREATE DATABASE #{DB名};
```

- 例

```sql
CREATE DATABASE hakozaru;
```

## テーブルを作成する
- 構文

```sql
CREATE TABLE #{テーブル名}
(#{列名} #{データ型} #{制約},
#{列名} #{データ型} #{制約},
・・・
#{テーブルの制約1}, #{テーブルの制約2}, ・・・)
```

- 例

```sql
CREATE TABLE users
(id        INTEGER      NOT NULL,
name       VARCHAR(100) NOT NULL,
email      VARCHAR(100) NOT NULL,
created_at DATE         NOT NULL,
updated_at DATE         NOT NULL,
PRIMARY KEY (id));
```
